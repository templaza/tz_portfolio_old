jQuery(function(a){var b=function(){a("#layout-options .row-fluid").each(function(){a(this).find(">.column").find(".columntools > .rowcolumnspop").attr("data-placement","bottom").data("placement","bottom"),a(this).find(">.column").first().find(".columntools > .rowcolumnspop").attr("data-placement","right").data("placement","right"),a(this).find(">.column").last().find(".columntools > .rowcolumnspop").attr("data-placement","left").data("placement","left")})};b();var c=function(b,c){a(b).find(">.widthinput-xs").attr("name",c+"[col-xs]"),a(b).find(">.widthinput-sm").attr("name",c+"[col-sm]"),a(b).find(">.widthinput-md").attr("name",c+"[col-md]"),a(b).find(">.widthinput-lg").attr("name",c+"[col-lg]"),a(b).find(">.offsetinput-xs").attr("name",c+"[col-xs-offset]"),a(b).find(">.offsetinput-sm").attr("name",c+"[col-sm-offset]"),a(b).find(">.offsetinput-md").attr("name",c+"[col-md-offset]"),a(b).find(">.offsetinput-lg").attr("name",c+"[col-lg-offset]"),a(b).find(">.typeinput").attr("name",c+"[type]"),a(b).find(">.positioninput").attr("name",c+"[position]"),a(b).find(">.styleinput").attr("name",c+"[style]"),a(b).find(">.customclassinput").attr("name",c+"[customclass]"),a(b).find(">.responsiveclassinput").attr("name",c+"[responsiveclass]"),a(b).find(">.animationType").attr("name",c+"[animationType]"),a(b).find(">.animationSpeed").attr("name",c+"[animationSpeed]"),a(b).find(">.animationDelay").attr("name",c+"[animationDelay]"),a(b).find(">.animationOffset").attr("name",c+"[animationOffset]"),a(b).find(">.animationEasing").attr("name",c+"[animationEasing]")},d=function(b,c){a(b).find(">div>.rowpropperties .rownameinput").attr("name",c+"[name]"),a(b).find(">div>.rowpropperties .rowcustomclassinput").attr("name",c+"[class]"),a(b).find(">div>.rowpropperties .rowresponsiveinput").attr("name",c+"[responsive]"),a(b).find(">div>.rowpropperties .rowbackgroundcolorinput").attr("name",c+"[backgroundcolor]"),a(b).find(">div>.rowpropperties .rowtextcolorinput").attr("name",c+"[textcolor]"),a(b).find(">div>.rowpropperties .rowlinkcolorinput").attr("name",c+"[linkcolor]"),a(b).find(">div>.rowpropperties .rowlinkhovercolorinput").attr("name",c+"[linkhovercolor]"),a(b).find(">div>.rowpropperties .rowmargininput").attr("name",c+"[margin]"),a(b).find(">div>.rowpropperties .rowpaddinginput").attr("name",c+"[padding]"),a(b).find(">div>.row-container .containertype").attr("name",c+"[containertype]")},e=function(b,f){a(b).find(">.row-fluid").each(function(b){var g=f+"[children]["+b+"]";d(this,g),a(this).find("> div >.row-fluid >.column").each(function(b){var d=g+"[children]["+b+"]";c(this,d),a(this).find(">.row-fluid").length&&e(this,d)}),e(a(this).next(),g)})};a.tzTemplateSubmit=function(){a("#content .generator >.row-fluid, #element-box .generator >.row-fluid").each(function(b){var f=fieldName+"["+b+"]";d(this,f),a(this).find("> div >.row-fluid >.column").each(function(b){var d=f+"[children]["+b+"]";c(this,d),a(this).find(">.row-fluid").length?e(this,d):e(a(this).next(),d)})}),a(".toolbox-saveConfig").trigger("click")},function(){jQuery.fn.textOnly=function(b){return a.trim(a(b).clone().children().remove().end().text())}}(jQuery.fn.textOnly),function(a){a.fn.alterClass=function(b,c){var d=this;if(-1===b.indexOf("*"))return d.removeClass(b),c?d.addClass(c):d;var e=new RegExp("\\s"+b.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g");return d.each(function(b,c){for(var d=" "+c.className+" ";e.test(d);)d=d.replace(e," ");c.className=a.trim(d)}),c?d.addClass(c):d}}(jQuery),function(){jQuery.fn.getClass=function(b){if(b&&"object"==typeof b){var c=a(this).attr("class").split(/\s+/),d=new RegExp(b),e=d.exec(c);if(null!=e)return e[e.length-1]}return"boolean"==typeof b?a(this).attr("class").split(/\s+/):""}}(jQuery.fn.getClass);a("#content").delegate(".columntools > a:not(.accordion-toggle), .row-tools > a:not(.accordion-toggle)","click",function(){return!1});var f=function(){a('a[rel="popover"]').popover({html:!0,content:function(){var b=a(this).attr("href"),c=a(this).closest(".column").getClass(/\bspan([0-9]{1,2})\b/);setTimeout(function(a,b){b.next().find("#spanwidth select").val(a)},300,c,a(this)),a("#content,#element-box").delegate(".popover select.possiblewidths","change",function(b){b.stopImmediatePropagation();var c=a(this).val();switch(a("button[class*='tz-admin-dv'].active").attr("data-device")){case"xs":a(this).parents(".popover").eq(0).parent().parent().find(">.widthinput-xs").val(c);break;case"sm":a(this).parents(".popover").eq(0).parent().parent().find(">.widthinput-sm").val(c);break;case"md":default:a(this).parents(".popover").eq(0).parent().parent().find(">.widthinput-md").val(c);break;case"lg":a(this).parents(".popover").eq(0).parent().parent().find(">.widthinput-lg").val(c)}a(this).parents(".popover").eq(0).parent().parent().removeClass().addClass("column span"+c)});var d=a(this).closest(".column").getClass(/\boffset([0-9]{1,2})\b/);setTimeout(function(a,b){b.next().find("#spanoffset select").val(a)},300,d,a(this)),a("#content,#element-box").delegate(".popover select.possibleoffsets","change",function(b){b.stopImmediatePropagation();var c=a(this).val(),d=a(this).parents(".popover").parent().parent().attr("class").replace(/\boffset\S+/g,"");switch(a(this).parents(".popover").parent().parent().attr("class",d).addClass("offset"+c),a("button[class*='tz-admin-dv'].active").attr("data-device")){case"xs":a(this).parents(".popover").parent().parent().find(">.offsetinput-xs").val(c);break;case"sm":a(this).parents(".popover").parent().parent().find(">.offsetinput-sm").val(c);break;case"md":default:a(this).parents(".popover").parent().parent().find(">.offsetinput-md").val(c);break;case"lg":a(this).parents(".popover").parent().parent().find(">.offsetinput-lg").val(c)}if("0"==c)switch(a(this).parents(".popover").parent().parent().removeClass("offset0"),a("button[class*='tz-admin-dv'].active").attr("data-device")){case"xs":a(this).parents(".popover").parent().parent().find(">.offsetinput-xs").val("");break;case"sm":a(this).parents(".popover").parent().parent().find(">.offsetinput-sm").val("");break;case"md":default:a(this).parents(".popover").parent().parent().find(">.offsetinput-md").val("");break;case"lg":a(this).parents(".popover").parent().parent().find(">.offsetinput-lg").val("")}});var e=a(this).closest(".column").find(".typeinput").val();setTimeout(function(a,b){b.next().find("#includetypes select").val(a)},300,e,a(this)),a("#content,#element-box").delegate(".popover select.includetypes","change",function(b){b.stopImmediatePropagation();var c=a(this).val();a(this).parents(".popover").parent().parent().find(">.typeinput").val(c),a(this).parents(".popover").parent().parent().removeClass("type-component type-message"),a(this).parents(".popover").parent().parent().addClass("type-"+c),a(this).closest(".tab-pane").find("#positions").hide(),a(this).parents(".popover").parent().parent().find(">.position-name").text(c.toLowerCase())});var f=a(this).closest(".column").find(".positioninput").val();setTimeout(function(a,b){b.next().find("#positions select").val(a)},300,f,a(this)),a("#content,#element-box").delegate(".popover select.positions","change",function(b){b.stopImmediatePropagation();var c=a(this).val();""==c&&(c="(none)"),a(this).parents(".popover").parent().parent().find(">.positioninput").val(c),a(this).parents(".popover").parent().parent().find(">.position-name").text(c)});var g=a(this).closest(".column").find(".styleinput").val();setTimeout(function(a,b){b.next().find("#modchrome select").val(a)},300,g,a(this)),a("#content,#element-box").delegate(".popover select.modchrome","change",function(b){b.stopImmediatePropagation();var c=a(this).val();a(this).parents(".popover").parent().parent().find(">.styleinput").val(c)});var h=a(this).closest(".column").find(".customclassinput").val();setTimeout(function(a,b){b.next().find("#inputcustomclass").val(a)},300,h,a(this)),a("#content,#element-box").delegate(".popover input.customclass","blur",function(b){b.stopImmediatePropagation();var c=a(this).val();a(this).parents(".popover").parent().parent().find(">.customclassinput").val(c)}),a("#content,#element-box").delegate(".popover #columnsettings a","click",function(){var b=a(this).attr("href");""!=b&&"#"!=b&&(a(this).parents("ul").find("li").removeClass("active"),a(this).parent().addClass("active"),a(this).parents("ul").next().find(".active").removeClass("active"),a(".popover "+b).addClass("active"),a(this).parents(".dropdown-menu").parents("li.dropdown").addClass("active"))});var i=a(this).closest(".column").find(".responsiveclassinput").val().split(/\s+/);a(b).find("#responsive input:checkbox").removeAttr("checked"),a.each(i,function(c,d){a(b).find('#responsive input[value="'+d+'"]').attr("checked",!0)}),a("#content,#element-box").delegate(".popover input:checkbox","click",function(b){b.stopImmediatePropagation();var c=a(this).val(),d=a(this).parents(".popover").parent().parent().find(">.responsiveclassinput").val();if("undefined"==typeof d&&(d=""),a(this).is(":checked")){var e=d+" "+c;e=a.unique(e.split(/\s+/)),e=e.join(" ")}else var e=d.replace(c,"");a(this).parents(".popover").parent().parent().find(">.responsiveclassinput").val(a.trim(e))});var j=a(this).closest(".column").find(".animationType").val();setTimeout(function(a,b){b.next().find("select.animationType").val(a)},300,j,a(this)),a("#content,#element-box").delegate(".popover select.animationType","change",function(b){b.stopImmediatePropagation();var c=a(this).val();a(this).parents(".popover").parent().parent().find(">.animationType").val(c)});var k=a(this).closest(".column").find(".animationSpeed").val();setTimeout(function(a,b){b.next().find("input.animationSpeed").val(a)},300,k,a(this)),a("#content,#element-box").delegate(".popover input.animationSpeed","blur",function(b){b.stopImmediatePropagation();var c=a(this).val();a(this).parents(".popover").parent().parent().find(">.animationSpeed").val(c)});var l=a(this).closest(".column").find(".animationDelay").val();setTimeout(function(a,b){b.next().find("input.animationDelay").val(a)},300,l,a(this)),a("#content,#element-box").delegate(".popover input.animationDelay","blur",function(b){b.stopImmediatePropagation();var c=a(this).val();a(this).parents(".popover").parent().parent().find(">.animationDelay").val(c)});var m=a(this).closest(".column").find(".animationOffset").val();setTimeout(function(a,b){b.next().find("input.animationOffset").val(a)},300,m,a(this)),a("#content,#element-box").delegate(".popover input.animationOffset","blur",function(b){b.stopImmediatePropagation();var c=a(this).val();a(this).parents(".popover").parent().parent().find(">.animationOffset").val(c)});var n=a(this).closest(".column").find(".animationEasing").val();return setTimeout(function(a,b){b.next().find("select.animationEasing").val(a)},300,n,a(this)),a("#content,#element-box").delegate(".popover select.animationEasing","change",function(b){b.stopImmediatePropagation();var c=a(this).val();a(this).parents(".popover").parent().parent().find(">.animationEasing").val(c)}),a(this).closest(".columntools").addClass("open"),a(b).html()},template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div> <p>   <a class="btn btn-primary sp-popover-apply" onclick="jQuery(this).closest(\'.popover\').prev().popover(\'hide\');  jQuery(this).closest(\'.popover\').prev().show();"><i class="icon-ok"></i> Apply</a> <a class="btn btn-danger sp-popover-close" onclick="jQuery(this).closest(\'.popover\').prev().popover(\'hide\'); jQuery(this).closest(\'.popover\').prev().show();"><i class="icon-remove"></i> Close</a>   </p> </div></div>'}).click(function(){return a(this).show(),!1}),a("#layout-options").delegate(".popover .sp-popover-apply, .popover .sp-popover-close","click",function(){a(this).closest(".columntools").removeClass("open"),a("#columnsettings").find("li").first().addClass("active")}),a('a[rel="rowpopover"]').popover({html:!0,placement:"left",content:function(){var b=a(this).attr("href"),c=a(this).parent().prev().find(">span.rowdocs>.rownameinput");setTimeout(function(a,b){a.parent().find(">.popover .rowname").val(b)},300,a(this),c.val()),a("#content,#element-box").delegate(".popover input.rowname","blur",function(b){b.stopImmediatePropagation();var c=a(this).val();a(this).parents(".popover").parent().prev().find(">span.rowdocs>.rownameinput").val(c),a(this).parents(".popover").parent().prev().find(">.rowname").text(c)});var d=a(this).parent().prev().find(">span.rowdocs>.rowbackgroundcolorinput");setTimeout(function(b,c){b.parent().find(">.popover .rowbackgroundcolor").val(c),b.parent().find(">.popover .rowbackgroundcolor").spectrum({flat:!1,showInput:!0,preferredFormat:"rgb",showButtons:!0,showAlpha:!0,showPalette:!0,clickoutFiresChange:!0,cancelText:"cancel",chooseText:"Choose",palette:[["rgba(255, 255, 255, 0)"]],change:function(b){var c=b.toRgbString();a(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowbackgroundcolorinput").val(c)}})},300,a(this),d.val());var e=a(this).parent().prev().find(">span.rowdocs>.rowtextcolorinput");setTimeout(function(b,c){b.parent().find(">.popover .rowtextcolor").val(c),b.parent().find(">.popover .rowtextcolor").spectrum({flat:!1,showInput:!0,preferredFormat:"rgb",showButtons:!0,showAlpha:!0,showPalette:!0,clickoutFiresChange:!0,cancelText:"cancel",chooseText:"Choose",palette:[["rgba(255, 255, 255, 0)"]],change:function(b){var c=b.toRgbString();a(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowtextcolorinput").val(c)}})},300,a(this),e.val());var f=a(this).parent().prev().find(">span.rowdocs>.rowlinkcolorinput");setTimeout(function(b,c){b.parent().find(">.popover .rowlinkcolor").val(c),b.parent().find(">.popover .rowlinkcolor").spectrum({flat:!1,showInput:!0,preferredFormat:"rgb",showButtons:!0,showAlpha:!0,showPalette:!0,clickoutFiresChange:!0,cancelText:"cancel",chooseText:"Choose",palette:[["rgba(255, 255, 255, 0)"]],change:function(b){var c=b.toRgbString();a(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowlinkcolorinput").val(c)}})},300,a(this),f.val());var g=a(this).parent().prev().find(">span.rowdocs>.rowlinkhovercolorinput");setTimeout(function(b,c){b.parent().find(">.popover .rowlinkhovercolor").val(c),b.parent().find(">.popover .rowlinkhovercolor").spectrum({flat:!1,showInput:!0,preferredFormat:"rgb",showButtons:!0,showAlpha:!0,showPalette:!0,clickoutFiresChange:!0,cancelText:"cancel",chooseText:"Choose",palette:[["rgba(255, 255, 255, 0)"]],change:function(b){var c=b.toRgbString();a(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowlinkhovercolorinput").val(c)}})},300,a(this),g.val());var h=a(this).parent().prev().find(">span.rowdocs>.rowmargininput");setTimeout(function(a,b){a.parent().find(">.popover .rowmargin").val(b)},300,a(this),h.val()),a("#content,#element-box").delegate(".popover input.rowmargin","blur",function(b){b.stopImmediatePropagation();var c=a(this).val();a(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowmargininput").val(c)});var i=a(this).parent().prev().find(">span.rowdocs>.rowpaddinginput");setTimeout(function(a,b){a.parent().find(">.popover .rowpadding").val(b)},300,a(this),i.val()),a("#content,#element-box").delegate(".popover input.rowpadding","blur",function(b){b.stopImmediatePropagation();var c=a(this).val();a(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowpaddinginput").val(c)});var j=a(this).parent().prev().find(">span.rowdocs>.rowcustomclassinput");setTimeout(function(a,b){a.parent().find(">.popover .rowcustomclass").val(b)},300,a(this),j.val()),a("#content,#element-box").delegate(".popover input.rowcustomclass","blur",function(b){b.stopImmediatePropagation();var c=a(this).val();a(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowcustomclassinput").val(c)});var k=a(this).parent().prev().find(">span.rowdocs>.rowresponsiveinput").val().split(/\s+/);return a(b).find("#rowresponsiveinputs input:checkbox").removeAttr("checked"),a.each(k,function(c,d){a(b).find('#rowresponsiveinputs input[value="'+d+'"]').attr("checked",!0)}),a("#content,#element-box").delegate(".popover input:checkbox","click",function(b){b.stopImmediatePropagation();var c=a(this).val(),d=a(this).parents(".popover").parent().prev().find("span.rowdocs>.rowresponsiveinput").val();if("undefined"==typeof d&&(d=""),a(this).is(":checked")){var e=d+" "+c;e=a.unique(e.split(/\s+/)),e=e.join(" ")}else var e=d.replace(c,"");a(this).parents(".popover").parent().prev().find("span.rowdocs>input.rowresponsiveinput").val(a.trim(e))}),a(b).html()},template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div><a class="btn btn-primary" onclick="jQuery(this).closest(\'.popover\').prev().popover(\'hide\'); jQuery(this).closest(\'.popover\').prev().show(); "><i class="icon-ok"></i> Apply</a></div></div>'}).click(function(){return a(this).show(),!1})};f(),a("#content,#element-box").delegate("a.rowdelete","click",function(){return confirm("Are you sure to delete this row?")&&a(this).parent().parent().parent().slideUp("slow",function(){a(this).remove()}),!1}),a("#content,#element-box").delegate("a.columndelete","click",function(){if(confirm("Are you sure to delete this column?")){$parent2=a(this).parent().parent().parent(),a(this).parent().parent().fadeOut("fast").remove();{$parent2.find(">.column").length}}return!1});var g=function(){a("div.row-fluid").sortable({forcePlaceholderSize:!0,axis:"x,y",items:">div.column",tolerance:"pointer",handle:".columnmove",containment:"parent",placeholder:"tz-state-highlight",start:function(a,b){b.placeholder.width(b.item.width())},update:function(){setTimeout(function(){a('a[rel="popover"]').popover("destroy"),a('a[rel="popover"]').show(),b(),f()},300)}}),a(".generator").sortable({axis:"y",forcePlaceholderSize:!0,containment:"parent",handle:".rowmove",placeholder:"tz-state-highlight-row",items:">div.row-fluid"}),a(".generator").sortable("refreshPositions"),a(".generator > .row-fluid .row-fluid .column").sortable({axis:"y",forcePlaceholderSize:!0,containment:"parent",handle:".row-move-in-column",placeholder:"tz-state-highlight",items:">div"})};g(),a("#content,#element-box").delegate("a.add-row","click",function(){var c=a(this);return a.get(pluginPath+"/new-row.php?time="+a.now(),function(d){a(d).hide().insertAfter(c.closest(".row-fluid")).slideDown("slow"),a('a[rel="popover"]').popover("destroy"),a('a[rel="popover"]').show(),b(),f()}),!1}),a("#content,#element-box").delegate("a.columnmove, a.icon-asterisk","click",function(){return!1});var h=function(c){a.get(pluginPath+"/new-column.php?time="+a.now(),function(d){a(d).hide().appendTo(c).fadeIn(1e3),g(),a('a[rel="popover"]').popover("destroy"),a('a[rel="popover"]').show(),b(),f()})};a("#content,#element-box").delegate("a.add-column","click",function(){a(this).parent().next().next().find(">.column").length;return h(a(this).parent().next().next()),a('a[rel="popover"]').popover("destroy"),a('a[rel="popover"]').show(),b(),f(),!1});var i=function(){a("#content,#element-box").delegate("a.add-rowin-column","click",function(){var c=a(this);return a.get(pluginPath+"/new-row-in-column.php?time="+a.now(),function(d){a(d).hide().appendTo(c.parent().parent()).slideDown("slow"),a('a[rel="popover"]').popover("destroy"),a('a[rel="popover"]').show(),b(),f()}),!1})};i();var j=new Array;j.lg="md",j.md="sm",j.sm="xs";var k=function(b){a("#plazart_layout_builder .generator .column").each(function(){for(var c=a(this).find(".widthinput-"+b).val(),d=a(this).find(".offsetinput-"+b).val(),e=b;""==c;)"xs"==e?c="12":(e=j[e],c=a(this).find(".widthinput-"+e).val());d=""!=d?" offset"+d:"",a(this).removeClass().addClass("ui-sortable column span"+c+d)})};a(document).ready(function(){a("button[class*='tz-admin-dv']").click(function(){switch(a("button[class*='tz-admin-dv']").removeClass("active"),a(this).addClass("active"),a(this).attr("data-device")){case"xs":a("#plazart_layout_builder .generator").css("width",450),k("xs");break;case"sm":a("#plazart_layout_builder .generator").css("width",650),k("sm");break;case"md":a("#plazart_layout_builder .generator").css("width",800),k("md");break;case"lg":default:a("#plazart_layout_builder .generator").css("width",950),k("lg")}}),a("button[class*='tz-admin-dv']").hover(function(){"undefined"!=typeof tooltip&&a(this).tooltip("show")})})});